


<!-- Source from https://bootsnipp.com/snippets/GavAo -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
 

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/register.css">
    <title>Login/Register Form</title>


    <a href="/" class = "btn btn-primary"> Home</a>

    
</head>
<body>

    <div>



    </div>

<!-- REGISTER USER  Form  -->
    <div id="logreg-forms">
        <form class="form-registration" method="POST"  action = "/register">
            <div class="mx-auto" style="width: 200px;">

            <h3>Register</h3>

            </div>
         

            <input type="input" name="firstName" id="firstName" class="form-control" placeholder="First Name">

            <input type="input" name="lastName" id="firstName" class="form-control" placeholder="Last Name">

            <input type="email" name="email" id="inputEmail" class="form-control" placeholder="Email address" autofocus="">
            <div class = "emailError">
            </div>

            <input type="password" name="password" id="inputPassword" class="form-control" placeholder="Password">
    <div class = "passwordError">
    </div>


            
            <button class="btn btn-success btn-block" type="submit"><i class="fas fa-sign-in-alt"></i> Register</button>
            <hr>


        </form>

        <a href = "/login" class="btn btn-link">Already registered?</a>

      
            
    </div>
            <!-- Display error if there is any -->


    
  
        



        <div class = "usernameError">
            </div>
          


    <script>
var regForm= document.querySelector('form');
regForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const email = form.email.value;
    const password = form.password.value


    try {
      const res = await fetch('/register', { 
        method: 'POST', 
        body: JSON.stringify({ email, password }),
        headers: {'Content-Type': 'application/json'}
      });
      const data = await res.json();
      console.log(data);
      if (data.errors) {
          console.log(data.errors);
        emailError.textContent = data.errors.email;
        // passwordError.textContent = data.errors.password;
              passwordError.textContent = 5000000;

      }
      if (data.user) {
        location.assign('/');
      }
    }
    catch (err) {
      console.log(err);
    }

})



    </script>

 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- <script src="/script.js"></script> -->
</body>
</html>